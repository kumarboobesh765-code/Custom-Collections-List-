{% comment %}
  Brand Collection – Manual Single Row Slider
{% endcomment %}

<section
  class="brand-collection-section"
  style="--box-size: {{ section.settings.box_size }}px;"
>
  <div class="page-width">

    {% if section.settings.heading != blank %}
      <h2 class="brand-heading">{{ section.settings.heading }}</h2>
    {% endif %}

    <div class="brand-slider-container">

      {% if section.settings.show_arrows %}
        <button class="brand-arrow prev" aria-label="Previous">‹</button>
      {% endif %}

      <div class="brand-collection-wrapper" id="brandSlider-{{ section.id }}">
        <div class="brand-collection-track">

          {% for block in section.blocks limit: section.settings.collection_limit %}
            {% assign col = collections[block.settings.collection] %}
            {% if col %}
              <a
                href="{{ col.url }}"
                class="brand-item"
                {{ block.shopify_attributes }}
              >
                <div class="brand-logo">
                  {% if block.settings.image %}
                    <img
                      src="{{ block.settings.image | image_url: width: 300 }}"
                      alt="{{ col.title }}"
                      loading="lazy"
                    >
                  {% elsif col.image %}
                    <img
                      src="{{ col.image | image_url: width: 300 }}"
                      alt="{{ col.title }}"
                      loading="lazy"
                    >
                  {% endif %}
                </div>

                <span class="brand-title">{{ col.title }}</span>
              </a>
            {% endif %}
          {% endfor %}

        </div>
      </div>

      {% if section.settings.show_arrows %}
        <button class="brand-arrow next" aria-label="Next">›</button>
      {% endif %}

    </div>
  </div>
</section>

{{ 'brand-collection-slider.css' | asset_url | stylesheet_tag }}
{{ 'brand-collection-slider.js' | asset_url | script_tag }}

{% schema %}
{
  "name": "Brand Collection Slider",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "BRANDS"
    },
    {
      "type": "range",
      "id": "collection_limit",
      "label": "Max Collections",
      "min": 4,
      "max": 30,
      "step": 1,
      "default": 12
    },
    {
      "type": "range",
      "id": "box_size",
      "label": "Brand Icon Size (px)",
      "min": 80,
      "max": 160,
      "step": 10,
      "default": 110
    },
    {
      "type": "checkbox",
      "id": "show_arrows",
      "label": "Show Arrow Controls",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "collection",
      "name": "Brand",
      "settings": [
        {
          "type": "collection",
          "id": "collection",
          "label": "Collection"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Custom Logo (optional)"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Brand Collection Slider "
    }
  ]
}
{% endschema %}
